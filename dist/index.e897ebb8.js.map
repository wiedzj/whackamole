{"mappings":"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","sources":["Code/Play&Win Whack-A-Mole copy 2/config.ts","Code/Play&Win Whack-A-Mole copy 2/mole-hill.ts","Code/Play&Win Whack-A-Mole copy 2/grid.ts","Code/Play&Win Whack-A-Mole copy 2/mole.ts","Code/Play&Win Whack-A-Mole copy 2/mole-spawner.ts","Code/Play&Win Whack-A-Mole copy 2/PlayAndWinPlatform.ts","Code/Play&Win Whack-A-Mole copy 2/game.ts","Code/Play&Win Whack-A-Mole copy 2/main.ts"],"sourcesContent":["export interface Config {\n  rows: number;\n  columns: number;\n  horizonHeight: number;\n  maxMoles: number;\n  moles: MoleType[];\n\n  speedIncrease?: DifficultyIncrease;\n  amountOfMolesIncrease?: DifficultyIncrease;\n\n  lives?: number;\n  time?: number;\n  sprites?: {};\n}\n\nexport interface MoleType {\n  spriteId?: number;\n  color: string;\n  probability: number;\n  time: number;\n  crawlOutTime: number;\n  hit?: RewardPunishment;\n  miss?: RewardPunishment;\n}\n\nexport interface DifficultyIncrease {\n  time: number,\n  increase: number\n}\n\nexport type RewardPunishmentType = \"point\" | \"live\";\n\nexport interface RewardPunishment {\n  type: RewardPunishmentType,\n  amount: number\n}\n\nexport const config: Config = {\n  rows: 4,\n  columns: 4,\n  horizonHeight: 30,\n  maxMoles: 3,\n  lives: 5,\n  // time: 50000,\n\n  speedIncrease: {\n    time: 5000,\n    increase: 1.03\n  },\n  amountOfMolesIncrease: {\n    time: 5000,\n    increase: 1\n  },\n  // time: 20000,\n  sprites: {\n    moleHill: \"../assets/mole-hill.png\",\n    ground: \"../assets/grass2.jpeg\",\n    mole_1: \"../assets/mole1.png\",\n    mole_2: \"../assets/poepie.png\",\n    mole_3: \"../assets/kip.png\"\n  },\n  moles: [\n    {\n    spriteId: 1,\n    color: \"#E6A951\",\n    probability: 20,\n    time: 1000,\n    crawlOutTime: 500,\n    hit:\n      {\n        type: \"point\",\n        amount: 1,\n      },\n    miss:\n      {\n        type: \"live\",\n        amount: -1\n      }\n    },\n    {\n      spriteId: 2,\n      color: \"blue\",\n      probability: 28,\n      time: 500,\n      crawlOutTime: 1000,\n      hit:\n        {\n          type: \"live\",\n          amount: -1,\n        },\n      // miss:\n      //   {\n      //     type: \"live\",\n      //     amount: 0\n      //   }\n    },{\n      spriteId: 3,\n      color: \"yellow\",\n      probability: 4,\n      time: 750,\n      crawlOutTime: 200,\n      hit: {\n        type: \"live\",\n        amount: 1\n      }\n    }\n  ]\n}\n","import { Game } from \"./game\";\nimport { Mole } from \"./mole\";\n\nexport class MoleHill {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  aspectRatio: number = 0;\n\n  mole: Mole | null = null;\n  image: HTMLImageElement | null = null;;\n\n  constructor(x: number, y: number, width: number, height: number, image: HTMLImageElement | undefined){\n    this.x = x;\n    this.y = y;\n\n    this.width = width;\n\n    if(image){\n      this.aspectRatio = image.naturalWidth / width;\n      this.height = image.naturalHeight / this.aspectRatio;\n      this.image = image;\n    } else {\n      this.height = height;\n    }\n\n  }\n\n  render(){\n    if(this.image){\n      Game.drawImage(this.image, this.x, this.y, this.width, this.height)\n    } else {\n      Game.drawShape(\"black\", this.x, this.y, this.width, this.height);\n    }\n  }\n}\n","import { Config } from \"./config\";\nimport { Game } from \"./game\";\nimport { Mole } from \"./mole\";\nimport { MoleHill } from \"./mole-hill\";\n\nexport class Grid {\n\n  moleHills: MoleHill[][] = [];\n\n  constructor(config: Config, moleHill: HTMLImageElement | undefined, floorHeight: number){\n      const rows = config.rows;\n      const cols = config.columns;\n\n      const holeWidth = Game.width / (cols + 1);\n      const holeHeight = floorHeight / (rows + 1);\n\n      const spaceBetweenX = (holeWidth / (cols + 1));\n      const spaceBetweenY = (holeHeight / (rows + 1));\n\n      for(let iRow = 0; iRow < rows; iRow++){\n        let columns: MoleHill[] = [];\n        for(let iCol = 0; iCol < cols; iCol++){\n          const x = spaceBetweenX * (iCol + 1) + holeWidth * iCol;\n          const y = floorHeight - spaceBetweenY * (iRow + 1) - holeHeight * (iRow + 1);\n          columns.push(new MoleHill(x, y, holeWidth, holeHeight, moleHill));\n        }\n        this.moleHills.push(columns);\n      }\n\n  }\n\n  render(){\n    for(let iRow = 0; iRow < this.moleHills.length; iRow++){\n      for(let iCol = 0; iCol < this.moleHills[iRow].length; iCol++){\n        const moleHill: MoleHill = this.moleHills[iRow][iCol];\n        if(moleHill.mole){\n          moleHill.mole.render();\n        }\n        moleHill.render();\n\n      }\n    }\n  }\n\n  update(){\n    for(let iRow = 0; iRow < this.moleHills.length; iRow++){\n      for(let iCol = 0; iCol < this.moleHills[iRow].length; iCol++){\n        const moleHill: MoleHill = this.moleHills[iRow][iCol];\n        if(moleHill.mole){\n          moleHill.mole.update();\n        }\n      }\n    }\n  }\n\n  isEmpty(){\n    for(let iRow = 0; iRow < this.moleHills.length; iRow++){\n      for(let iCol = 0; iCol < this.moleHills[iRow].length; iCol++){\n        const moleHill: MoleHill = this.moleHills[iRow][iCol];\n        if(moleHill.mole){\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n}\n","import { MoleType } from \"./config\";\nimport { Game } from \"./game\";\nimport { MoleHill } from \"./mole-hill\";\n\ninterface HitBox {\n  x1: number,\n  x2: number,\n  y1: number,\n  y2: number\n}\n\nexport class Mole {\n  x: number;\n  y: number;\n  width: number;\n\n  height: number = 0;\n  maxHeight: number;\n  moleHillHeight: number;\n\n  crawlOutTime: number;\n\n  time: number = 0;\n  maxTime: number;\n\n  moleConfig: MoleType;\n\n  isHit: boolean = false;\n  isMissed: boolean = false;\n\n  img: HTMLImageElement | undefined = undefined;\n  hitImg: HTMLImageElement | undefined = undefined;\n  missImg: HTMLImageElement | undefined = undefined;\n\n  constructor(config: MoleType, moleHill: MoleHill, speedIncrease: number, img?: HTMLImageElement){\n    this.moleConfig = config;\n    this.crawlOutTime = config.crawlOutTime * speedIncrease;\n    this.maxTime = config.time * speedIncrease;\n    this.y = moleHill.y;\n\n    this.moleHillHeight = moleHill.height;\n\n    if(img){\n      this.img = img;\n      this.width = img.naturalWidth / moleHill.aspectRatio;\n      this.maxHeight = img.naturalHeight / moleHill.aspectRatio;\n      this.x = moleHill.x + (moleHill.width - this.width) / 2;\n    } else {\n      this.maxHeight = moleHill.width;\n      this.x = moleHill.x + moleHill.width / 4;\n      this.width = moleHill.width / 2;\n    }\n  }\n\n  hit(){\n    if(this.isHit === true){\n      return;\n    }\n    this.isHit = true;\n    if(this.moleConfig.hit === undefined){\n      return;\n    }\n    switch(this.moleConfig.hit.type){\n      case 'live': {\n        if(Game.lives !== undefined)\n          Game.lives += this.moleConfig.hit.amount;\n        break;\n      }\n      case 'point': {\n        Game.points += this.moleConfig.hit.amount;\n        console.log(Game.points);\n        break;\n      }\n    }\n  }\n\n  getHitBox(): HitBox {\n    return {\n      x1: Math.floor(this.x - 2),\n      x2: Math.floor(this.x + this.width + 2),\n      y1: Math.floor(this.y - 2),\n      y2: Math.floor(this.y + this.height + 2)\n    }\n  }\n\n  miss(){\n    if(this.isMissed){\n      return;\n    }\n    this.isMissed = true;\n    if(this.moleConfig.miss === undefined){\n      return;\n    }\n    switch(this.moleConfig.miss.type){\n      case 'live': {\n        if(Game.lives !== undefined && Game.lives !== 0)\n          Game.lives += this.moleConfig.miss.amount;\n        break;\n      }\n      case 'point': {\n        Game.points += this.moleConfig.miss.amount;\n        console.log(Game.points);\n        break;\n      }\n    }\n  }\n\n  render(){\n    if(this.isHit){\n      this.height -= this.maxHeight / (20);\n      if(this.height < 0){\n        this.height = 0;\n      }\n    } else {\n      if(this.height < this.maxHeight && this.time < this.maxTime){\n        this.height += this.maxHeight / (this.crawlOutTime / (1000 /Game.frameRate));\n      } else if(this.time >= this.maxTime){\n        this.height -= this.maxHeight / (this.crawlOutTime / (1000 / Game.frameRate));\n        if(this.height < 0){\n          this.height = 0;\n        }\n      } else {\n        this.time += 1000 / Game.frameRate;\n      }\n\n      \n    }\n\n    if(this.img){\n      Game.drawImage(this.img, this.x, this.y, this.width, this.height, this.isHit ? \"brightness(0%)\" : undefined, this.height / this.maxHeight * 100);\n    } else {\n      Game.drawShape(this.isHit ? \"red\" : this.moleConfig.color, this.x, this.y, this.width, this.height);\n    }\n  }\n\n  update(){\n    if (this.time >= this.maxTime && this.height <= this.moleHillHeight && this.isMissed === false){\n      this.miss();\n    }\n  }\n}\n","import { Config, MoleType } from \"./config\";\nimport { Image } from \"./game\";\nimport { Mole } from \"./mole\";\nimport { MoleHill } from \"./mole-hill\";\n\nexport class MoleSpawner {\n  moleTypes: MoleType[];\n  moleHills: MoleHill[][];\n  spawnedMoles: Mole[] = [];\n  maxMoles: number;\n  speedMultiplyer: number = 1;\n\n  moleImages: Image[] = [];\n\n  spawnList: number[] = [];\n\n  constructor(config: Config, moleHills: MoleHill[][], moleImgs?: Image[]){\n    this.moleTypes = config.moles;\n    this.moleHills = moleHills;\n    this.maxMoles = config.maxMoles;\n\n    if(moleImgs){\n          this.moleImages = moleImgs.sort();\n    }\n    this.generateSpawnList();\n  }\n\n  generateSpawnList(){\n    this.moleTypes.forEach(mole => {\n      for(let i = 0; i < mole.probability; i++){\n        this.spawnList.push(this.moleTypes.indexOf(mole));\n      }\n    });\n  }\n\n  spawn(){\n    if(this.spawnedMoles.length >= this.maxMoles){\n      return;\n    }\n\n    if(this.spawnList.length === 0){\n      this.generateSpawnList();\n    }\n\n    let spawned = false;\n    while(spawned === false){\n      let randomY = Math.round(Math.random() * (this.moleHills.length - 1));\n      let randomX =  Math.round(Math.random() * (this.moleHills[0].length - 1));\n\n      let randomHill = this.moleHills[randomY][randomX];\n\n      if(randomHill.mole === null) {\n        let randomMoleIndex = Math.round(Math.random() * (this.spawnList.length - 1));\n        let randomMole = this.moleTypes[this.spawnList[randomMoleIndex]];\n        this.spawnList.splice(randomMoleIndex, 1);\n\n\n        let moleImg: Image | undefined = undefined;\n        if(randomMole.spriteId){\n          moleImg = this.moleImages.find(img => img.name === \"mole_\" + randomMole.spriteId);\n        }\n        const mole = new Mole(randomMole, randomHill, this.speedMultiplyer, moleImg?.img);\n\n        randomHill.mole = mole;\n        this.spawnedMoles.push(mole);\n\n        spawned = true;\n\n        setTimeout(() => {\n          this.spawnedMoles.splice(this.spawnedMoles.indexOf(mole), 1);\n          randomHill.mole = null;\n        }, (randomMole.crawlOutTime * 2 * this.speedMultiplyer + randomMole.time * this.speedMultiplyer));\n      }\n    }\n\n\n  }\n}\n","// Message to the platform\nexport type EventTypes = 'play' | 'gameover' | 'ready';\nexport interface GameOverData {\n    score: number;\n}\nexport type EventData = GameOverData;\nexport interface GameEvent {\n    eventName: EventTypes;\n    data?: EventData;\n}\n\n// Messages from the platform\nexport type PlatformEventTypes = 'play';\nexport interface PlatFormEvent {\n    eventName: PlatformEventTypes;\n}\n\nexport interface PEWGame {\n   play;\n}\n\nexport class PlayAndWinPlatform {\n  private game: PEWGame;\n  constructor() {\n    console.log('PewPlatform CREATED');\n    window.addEventListener('message', (ev: MessageEvent) => {\n      console.log('RECEIVE message', ev);\n      this.receive(ev.data);\n    });\n\n    if (window === top) {\n      // console.error('THIS GAME CAN ONLY BE PLAYED ON THE PLAYANDWIN PLATFORM');\n      // window.document.body.innerHTML = 'Error: Play and win platform not found';\n      // return;\n    }\n\n    (<any>window).pew = this;\n\n    // this.ready();\n  }\n\n  private receive(data: PlatFormEvent) {\n    console.log('G: RECEIVE', data);\n    switch (data.eventName) {\n      case 'play':\n        this.game.play(); // Send play message to the game\n        break;\n    }\n    // document.getElementById('messages').value = document.getElementById('messages').value + \"\\n\" + data;\n  }\n\n  public init(game: PEWGame, ready: {(): void}) {\n    this.game = game;\n    ready();\n  }\n\n  /**\n   * Retrieve updated score from game\n   */\n  public updatescore(score: number) {\n\n  }\n\n  /**\n   * Retrieve play event when game actualy starts\n   */\n  public gamestarted() {\n    console.log('G: SEND', 'play');\n    this.sendEvent({ eventName: 'play' });\n  }\n\n  public play() {\n    this.game.play();\n  }\n\n  /**\n   * Retrieve gameover event from game whith endsoce\n   */\n  public gameover(score: number) {\n    console.log('G: SEND', 'Gameover');\n    // const score = Math.round(Math.random() * 1000);\n    this.sendEvent({ eventName: 'gameover', data: { score } });\n  }\n\n  /**\n   * Receive ready event from game when allowed to use start\n   */\n  public ready() {\n    console.log('G: SEND', 'Ready');\n    this.sendEvent({ eventName: 'ready' });\n  }\n\n  /**\n   * Send message to the game platform\n   * @param event\n   */\n  private sendEvent(event: GameEvent) {\n    console.log(event);\n    window.top.postMessage(event, '*');\n  }\n}\n","import { config, Config } from \"./config\";\nimport { Grid } from \"./grid\";\nimport { MoleSpawner } from \"./mole-spawner\";\nimport { PlayAndWinPlatform } from \"./PlayAndWinPlatform\";\n\nexport interface Image {\n  name: string,\n  img: HTMLImageElement | undefined\n}\n\nexport class Game {\n  static ctx: CanvasRenderingContext2D;\n  static width: number;\n  static height: number;\n\n  static points: number = 0;\n  static lives: number | undefined = undefined;\n  static timeLeft: number | undefined = undefined;\n\n  gameLoop: number;\n\n  time: number = 0;\n\n  tapToPlay: boolean = true;\n  playing: boolean = false;\n  gameOver: boolean = false;\n  finalScore: number | null = null;\n\n  config: Config;\n\n  grid: Grid;\n  moleSpawner: MoleSpawner;\n\n  images: Image[] = [];\n\n  skyImage: ImageBitmap | null = null;\n  floorImage: HTMLImageElement | undefined = undefined;\n\n  pew: PlayAndWinPlatform;\n\n  imageTimer: number = 0;\n\n  static frameRate: number = 100;\n\n  constructor(){\n    this.getSettingsFromURI(location.search);\n\n    document.addEventListener('DOMContentLoaded', () => { this.preload(); });\n    window.addEventListener('resize', ()=> {\n      Game.height = window.innerHeight;\n      Game.width = window.innerWidth;\n      const canvas = document.getElementById(\"canvas\");\n      Game.ctx = canvas.getContext(\"2d\");\n      Game.ctx.canvas.height = Game.height;\n      Game.ctx.canvas.width = Game.width;\n      });\n  }\n\n  restart(){\n    clearInterval(this.gameLoop);\n    this.time = 0;\n    this.moleSpawner.maxMoles = this.config.maxMoles;\n    this.moleSpawner.speedMultiplyer = 1;\n    console.log(this.moleSpawner.speedMultiplyer);\n    Game.lives = this.config.lives;\n    Game.timeLeft = this.config.time;\n    Game.points = 0;\n    this.finalScore = null;\n    this.gameOver = false;\n    this.playing = false;\n    this.tapToPlay = true;\n    this.pew.ready();\n  }\n\n\n  public play(){\n    this.pew.gamestarted();\n    this.gameLoop = setInterval(()=>{\n      this.render();\n      if(this.playing && !this.gameOver)\n      this.update();\n    }, 1000 / Game.frameRate);\n  }\n\n  preload(){\n    if(this.config.sprites === undefined){\n      return;\n    }\n    for(const [key, value] of Object.entries(this.config.sprites)){\n      let img = new Image();\n      img.onload = () => {\n        this.images.push({\n          img: img,\n          name: key\n        })\n        this.imageReady();\n      }\n      img.onerror = () => {\n        this.images.push({\n          name: key,\n          img: undefined\n        });\n        this.imageReady();\n      }\n      this.imageTimer += 1;\n      img.src = value.toString();\n    }\n  }\n\n  imageReady(){\n    this.imageTimer--;\n    if(this.imageTimer === 0){\n      console.log(\"Start loading\")\n      this.load();\n    }\n  }\n\n  \n\n  load(){\n    console.log(\"LOAD\")\n    const canvas = document.getElementById(\"canvas\");\n\n    canvas.addEventListener(\"click\", (e)=> {\n      this.canvasClicked(e as MouseEvent);\n    })\n\n    canvas.addEventListener(\"touchstart\", (e)=> {\n      this.canvasClicked(e as TouchEvent);\n    })\n\n    Game.ctx = canvas.getContext(\"2d\");\n    \n    Game.height = window.innerHeight;\n    Game.width = window.innerWidth;\n    Game.ctx.canvas.height = Game.height;\n    Game.ctx.canvas.width = Game.width;\n\n    Game.lives = this.config.lives;\n    Game.timeLeft = this.config.time;\n\n    // Game.frameRate = this.config.frameRate;\n\n    const moleHillImg = this.images.find(img => img.name === \"moleHill\")?.img;\n\n    this.floorImage = this.images.find(img => img.name === \"ground\")?.img;\n\n    const moleImgs = this.images.filter(img => img.name.split(\"_\")[0] === \"mole\");\n\n    let groundHeight = Game.height * this.config.horizonHeight / 100;\n\n    this.grid = new Grid(this.config, moleHillImg, groundHeight);\n    this.moleSpawner = new MoleSpawner(this.config, this.grid.moleHills, moleImgs);\n\n    this.pew = new PlayAndWinPlatform();\n    this.pew.ready();\n\n    this.pew.init(this, () => {\n      this.restart;\n      this.play;\n    });\n  }\n\n  canvasClicked(e: MouseEvent | TouchEvent){\n    if(this.gameOver && this.grid.isEmpty()){\n      this.restart();\n      return;\n    }\n    if(this.tapToPlay){\n      this.tapToPlay = false;\n      setTimeout(() => {\n        this.playing = true;\n      }, 1000)\n      return;\n    }\n    let x: number, y: number;\n    if(e instanceof MouseEvent){\n      x = e.clientX;\n      y = Game.height - e.clientY;\n    } else {\n      x = e.touches[0].clientX;\n      y = Game.height - e.touches[0].clientY;\n    }\n    \n    let moles = this.moleSpawner.spawnedMoles.sort((a, b)=> {return a.y - b.y})\n\n    for(let i = 0; i < moles.length; i++){\n      const mole = moles[i];\n      const hitbox = mole.getHitBox();\n      if(x > hitbox.x1 && x < hitbox.x2 && y > hitbox.y1 && y < hitbox.y2){\n        mole.hit();\n        break;\n      }\n    }\n  }\n\n  render(){\n    // Sky\n    Game.ctx.clearRect(0, 0, Game.width, Game.height);\n    Game.drawShape(\"#33A8FF\", 0, 0, Game.width, Game.height);\n\n    if(!this.gameOver && !this.tapToPlay){\n      Game.drawText(Game.points.toString(), 20, Game.height - 40, \"30px Arial\", \"white\", \"start\");\n    if(Game.lives !== undefined){\n      Game.drawText(Game.lives.toString(), Game.width - 40, Game.height - 40, \"30px Arial\", \"white\", \"end\");\n      Game.drawText(\" ♥︎ \", Game.width - 40 , Game.height - 38, \"30px Arial\", \"red\", \"start\");\n    }\n\n    if(Game.timeLeft !== undefined){\n      Game.drawText(Math.ceil(Game.timeLeft/1000).toString(), Game.width * (11/20), Game.height - 38, \"30px Arial\", \"white\", \"end\");\n      Game.drawText(\" ⨶ \", Game.width * (11/20) , Game.height - 38, \"30px Arial\", \"black\", \"start\");\n    }\n    }\n    // Ground\n    if(this.floorImage){\n      Game.drawImage(this.floorImage, 0, 0, Game.width, Game.height * this.config.horizonHeight / 100);\n    } else {\n      Game.drawShape(\"green\", 0, 0, Game.width, Game.height * this.config.horizonHeight / 100);\n    }\n\n    this.grid.render();\n\n    if(this.tapToPlay && !this.gameOver){\n      Game.drawShape(\"rgba(0, 0, 0, 0.5)\", 0, 0, Game.width, Game.height);\n      Game.drawText(\"Tap to play\", Game.width / 2, Game.height - 40, \"30px Arial\", \"white\", \"center\");\n\n    }\n\n    if(this.gameOver){\n      Game.drawShape(\"rgba(0, 0, 0, 0.5)\", 0, 0, Game.width, Game.height);\n      Game.drawText(\"GAME OVER - Score: \" + this.finalScore, Game.width / 2, Game.height - 40, \"30px Arial\", \"white\", \"center\");\n    }\n    \n  }\n\n  update(){\n    if(this.gameOver){\n      return;\n    }\n    this.time += 1000 / Game.frameRate\n    if(this.time > 0){\n      if(this.config.speedIncrease && (this.time % this.config.speedIncrease.time === 0)){\n        if(this.moleSpawner.speedMultiplyer - (this.config.speedIncrease.increase - 1) > 0)\n        this.moleSpawner.speedMultiplyer -= (this.config.speedIncrease.increase - 1);\n      }\n      if(this.config.amountOfMolesIncrease && (this.time % this.config.amountOfMolesIncrease.time === 0)){\n        if((this.moleSpawner.maxMoles + this.config.amountOfMolesIncrease.increase) < (this.config.columns * this.config.rows - 2)){\n          this.moleSpawner.maxMoles += this.config.amountOfMolesIncrease.increase;\n        }\n      }\n\n    if(this.gameOver === false && ((Game.timeLeft !== undefined && Game.timeLeft === 0) || (Game.lives !== undefined && Game.lives === 0))){\n      this.finalScore = Game.points;\n      this.gameOver = true;\n      this.playing = false;\n      \n      this.pew.gameover(this.finalScore);\n\n\n      return;\n    }\n      if(Game.timeLeft){\n        Game.timeLeft -= 10;\n      }\n      this.grid.update();\n      this.moleSpawner.spawn();\n\n    }\n  }\n\n  static drawImage(image: HTMLImageElement, x: number, y: number, width: number, height: number, filter?: string, crop?: number){\n    if(this.ctx === null){\n      return;\n    }\n    // Translate Y\n    y = this.height - y - height;\n    if(filter){\n      this.ctx.filter = filter;\n    }\n    if(crop === undefined){\n      this.ctx.drawImage(image, x, y, width, height);\n    } else {\n      const sx = 0;\n      const sy = 0;\n      const sw = image.naturalWidth;\n      const sh = image.naturalHeight * crop / 100;\n      this.ctx.drawImage(image, sx, sy, sw, sh, x, y, width, height);\n    }\n    this.ctx.filter = \"none\"\n  }\n\n  static drawShape(color: string,x: number, y: number, width: number, height: number){\n    if(this.ctx === null){\n      return;\n    }\n    if(height < 0){\n      height = 0;\n    }\n    // Translate Y\n    y = this.height - y - height;\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(x, y, width, height);\n  }\n\n  static drawText(text: string, x: number, y: number, font: string, color: string = \"white\", align: CanvasTextAlign = \"center\"){\n    if(this.ctx === null){\n      return;\n    }\n    y = this.height - y;\n\n    this.ctx.textAlign = align;\n    this.ctx.font = font;\n    this.ctx.fillStyle = color;\n    this.ctx.fillText(text, x, y);\n  }\n\n  getSettingsFromURI(uri: string){\n    let settingString;\n    const split = uri.split(\"&\")\n    for(let s of split){\n      if(s[0] === \"s\"){\n        settingString = atob(s.split(\"=\")[1]);\n      }\n    }\n\n    if(settingString === undefined){\n      this.config = config;\n      return;\n    }\n\n    let jsonString = \"{\";\n\n    let settings = settingString.split(\"\\n\");\n    settings.forEach(s => {\n      const keyAndValue = s.split(\"=\");\n      if(keyAndValue.length === 1){\n        return;\n      }\n      let line = '\"' + keyAndValue[0] + '\": ' + keyAndValue[1];\n      if(settings.indexOf(s) < (settings.length - 1)){\n        line += \",\";\n      }\n\n      jsonString += line;\n\n    });\n    jsonString += \"}\";\n    this.config = JSON.parse(jsonString);\n  }\n}\n\n","import { Game } from './game';\n\nconst game = new Game();\n\n// document.getElementById('btnReplay').addEventListener('click', (e) => {\n//   // game.replay();\n// });\n"],"names":["$29570dc5b53425c5$export$e506a1d27d1eaa20","rows","columns","horizonHeight","maxMoles","lives","speedIncrease","time","increase","amountOfMolesIncrease","sprites","moleHill","ground","mole_1","mole_2","mole_3","moles","spriteId","color","probability","crawlOutTime","hit","type","amount","miss","$49c42dc66327109c$export$b29d0fb048b26c2","x","y","width","height","image","this","aspectRatio","mole","naturalWidth","naturalHeight","render","$544de6131768b4ac$export$985739bfa5723e08","drawImage","drawShape","$8b2d988abe1b4e3a$export$ef2184bd89960b14","config","floorHeight","moleHills","cols","holeWidth","holeHeight","spaceBetweenX","spaceBetweenY","iRow","iCol","push","length","update","isEmpty","$6d57c927b97d8609$export$fe39c5641f2a6b9a","img","isHit","isMissed","undefined","hitImg","missImg","moleConfig","maxTime","moleHillHeight","maxHeight","points","console","log","getHitBox","x1","Math","floor","x2","y1","y2","frameRate","$e6762b35c3ac0780$export$6590bd73ac104d20","moleImgs","spawnedMoles","speedMultiplyer","moleImages","spawnList","moleTypes","sort","generateSpawnList","forEach","i","indexOf","spawn","spawned","randomY","round","random","randomX","randomHill","moleImg","randomMoleIndex","randomMole","splice","find","name","setTimeout","$fc2c4e45e9da4c66$export$39de2c1faf6101a2","window","addEventListener","ev","receive","data","pew","eventName","game","play","init","ready","updatescore","score","gamestarted","sendEvent","gameover","score1","event","top","postMessage","tapToPlay","playing","gameOver","finalScore","images","skyImage","floorImage","imageTimer","getSettingsFromURI","location","search","document","preload","innerHeight","innerWidth","canvas","getElementById","ctx","getContext","restart","clearInterval","gameLoop","moleSpawner","timeLeft","setInterval","key","value","Object","entries","Image","onload","imageReady","onerror","src","toString","load","e","canvasClicked","moleHillImg","filter","split","groundHeight","grid","MouseEvent","clientX","clientY","touches","a","b","hitbox","clearRect","drawText","ceil","crop","sx","sy","sw","sh","width1","height1","fillStyle","fillRect","text","font","color1","align","textAlign","fillText","uri","settingString","s1","atob","jsonString","settings","s","keyAndValue","line","JSON","parse"],"version":3,"file":"index.e897ebb8.js.map"}